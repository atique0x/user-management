<div class="container mx-auto p-6 space-y-6">
  <h3 class="text-3xl font-extrabold text-center text-blue-500">User List</h3>
  <!-- Top Controls -->
  <section class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <!-- Add User Button -->
      <div class="flex items-center">
        <button
          (click)="onAddUser()"
          class="w-full md:w-auto px-5 py-2.5 bg-blue-500 text-white text-sm font-medium rounded-lg shadow-md hover:bg-blue-600 transition"
        >
          + Add User
        </button>
      </div>

      <!-- Status Filter -->
      <div
        class="flex flex-wrap items-center gap-3 bg-blue-50 border rounded-lg px-4 py-1"
      >
        <span class="text-gray-700 font-medium">Status:</span>
        <label class="flex items-center gap-1 cursor-pointer">
          <input
            type="radio"
            name="statusFilter"
            [(ngModel)]="statusFilter"
            [value]="'active'"
            (change)="onStatusFilterChange()"
            class="h-4 w-4 text-blue-600 border-gray-300"
          />
          Active
        </label>
        <label class="flex items-center gap-1 cursor-pointer">
          <input
            type="radio"
            name="statusFilter"
            [(ngModel)]="statusFilter"
            [value]="'inactive'"
            (change)="onStatusFilterChange()"
            class="h-4 w-4 text-blue-600 border-gray-300"
          />
          Inactive
        </label>
      </div>

      <!-- Role Filter -->
      <div
        class="flex items-center justify-between bg-green-50 border rounded-lg px-4 py-1"
      >
        <label for="roleFilter" class="text-gray-700 font-medium">Role:</label>
        <select
          id="roleFilter"
          [(ngModel)]="role"
          (change)="onRoleFiltered()"
          class="border rounded-lg px-3 py-1 text-gray-700 w-full md:w-auto"
        >
          <option [ngValue]="'default'">Default</option>
          <option *ngFor="let role of roles" [ngValue]="role">
            {{ role | titlecase }}
          </option>
        </select>
      </div>

      <!-- Items Per Page -->
      <div
        class="flex items-center justify-between bg-red-50 border rounded-lg px-4 py-1"
      >
        <label for="itemsPerPage" class="text-gray-700 font-medium"
          >Show:</label
        >
        <select
          id="itemsPerPage"
          [(ngModel)]="itemsPerPage"
          (change)="onItemsPerPageChange()"
          class="border rounded-lg px-3 py-1 text-gray-700 w-full md:w-auto"
        >
          <option *ngFor="let option of itemsPerPageOptions" [ngValue]="option">
            {{ option }}
          </option>
        </select>
      </div>
    </div>

    <div class="w-full">
      <div class="relative">
        <input
          type="text"
          placeholder="Search by name, email, or phone..."
          class="w-full border border-gray-300 rounded-lg pl-10 pr-4 py-2 shadow-sm outline-none transition"
          [(ngModel)]="searchText"
          (input)="onSearchChange()"
        />
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="absolute left-3 top-2.5 h-5 w-5 text-gray-400"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-4.35-4.35M11 18a7 7 0 100-14 7 7 0 000 14z"
          />
        </svg>
      </div>
    </div>
  </section>

  <!-- Table -->
  <div class="overflow-x-auto rounded-xl shadow-md">
    <table
      class="min-w-full border border-gray-200 bg-white rounded-xl overflow-hidden"
    >
      <thead class="bg-gradient-to-r from-gray-800 to-gray-700 text-white">
        <tr>
          <th class="py-3 px-4 text-left">#</th>
          <th class="py-3 px-4 text-left">Name</th>
          <th class="py-3 px-4 text-left">Email</th>
          <th class="py-3 px-4 text-left">Phone</th>
          <th class="py-3 px-4 text-left">Date of Birth</th>
          <th class="py-3 px-4 text-left">Address</th>
          <th class="py-3 px-4 text-center">Status</th>
          <th class="py-3 px-4 text-center">Role</th>
          <th class="py-3 px-4 text-center">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="users.length <= 0">
          <td colspan="9" class="py-8">
            <div
              class="flex flex-col items-center justify-center space-y-2 text-gray-500"
            >
              <!-- Optional icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-12 w-12 text-gray-300"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 14l2-2 4 4M7 10h10M5 6h14M5 18h14"
                />
              </svg>
              <p class="text-lg font-medium">No users found</p>
              <p class="text-sm text-gray-400">
                Try adjusting your filters or search
              </p>
            </div>
          </td>
        </tr>

        <tr
          class="border-b transition"
          *ngFor="let user of users; let i = index"
          [ngClass]="{
            'bg-green-100 ': user.id === markedUserId,
            'even:bg-gray-50 odd:bg-white hover:bg-blue-50':
              user.id !== markedUserId
          }"
        >
          <td class="py-3 px-4 font-medium text-gray-800">
            {{ i + 1 + (currentPage - 1) * itemsPerPage }}
          </td>
          <td class="py-3 px-4 font-medium text-gray-800">{{ user.name }}</td>
          <td class="py-3 px-4 text-gray-600">{{ user.email }}</td>
          <td class="py-3 px-4 text-gray-600">{{ user.phone }}</td>
          <td class="py-3 px-4">{{ user.dob | date }}</td>
          <td class="py-3 px-4">{{ user.address | titlecase }}</td>
          <td class="py-3 px-4 text-center">
            <span
              class="px-4 py-1 text-xs font-semibold rounded-full"
              [ngClass]="
                user.isActive
                  ? 'bg-green-100 text-green-700'
                  : 'bg-red-100 text-red-600'
              "
            >
              {{ user.isActive ? "Active" : "Inactive" }}
            </span>
          </td>
          <td class="py-3 px-4">{{ user.role | titlecase }}</td>
          <td class="py-3 px-4 text-center">
            <div *ngIf="user.isActive" class="flex gap-2 justify-center">
              <button
                (click)="onUpdateUser(user.id)"
                class="px-3 py-1 bg-blue-500 text-white text-xs rounded-lg shadow hover:bg-blue-600 transition"
              >
                Update
              </button>
              <button
                (click)="onToggleActiveStatus(user.id)"
                class="px-4 py-1 bg-red-500 text-white text-xs rounded-lg shadow hover:bg-red-600 transition"
              >
                Inactivated
              </button>
            </div>

            <div *ngIf="!user.isActive" class="flex gap-2 justify-center">
              <button
                (click)="onDeleteUser(user.id)"
                class="px-4 py-1 bg-red-500 text-white text-xs rounded-lg shadow hover:bg-red-600 transition"
              >
                Delete
              </button>
              <button
                (click)="onToggleActiveStatus(user.id)"
                class="px-4 py-1 bg-green-500 text-white text-xs rounded-lg shadow hover:bg-green-600 transition"
              >
                Reactivated
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <app-pagination
    [currentPage]="currentPage"
    [totalPages]="totalPages"
    [itemsPerPage]="itemsPerPage"
    (pageChange)="onPageChange($event)"
  ></app-pagination>
</div>
